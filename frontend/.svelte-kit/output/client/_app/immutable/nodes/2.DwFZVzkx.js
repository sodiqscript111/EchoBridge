import{s as Q,d as m,i as $,b as v,l as y,c as k,e as E,m as O,g as P,h as x,j,o as W,n as I,a as G,f as z,t as H,p as J,q as T}from"../chunks/DF-Dz73P.js";import{S as X,i as Y,t as D,a as C,c as L,g as M,d as Z,m as ee,b as te,e as le}from"../chunks/BdLCvuL5.js";import{e as S}from"../chunks/BeuEQZSN.js";import{P as oe}from"../chunks/B5nKSrpE.js";import{a as se}from"../chunks/DOzjk_c7.js";function U(i,e,s){const o=i.slice();return o[3]=e[s][0],o[4]=e[s][1],o}function A(i,e,s){const o=i.slice();return o[7]=e[s],o}function ne(i){let e,s,o=S(Object.entries(i[0])),l=[];for(let t=0;t<o.length;t+=1)l[t]=F(U(i,o,t));const a=t=>D(l[t],1,1,()=>{l[t]=null});return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=T()},l(t){for(let n=0;n<l.length;n+=1)l[n].l(t);e=T()},m(t,n){for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(t,n);$(t,e,n),s=!0},p(t,n){if(n&1){o=S(Object.entries(t[0]));let r;for(r=0;r<o.length;r+=1){const g=U(t,o,r);l[r]?(l[r].p(g,n),C(l[r],1)):(l[r]=F(g),l[r].c(),C(l[r],1),l[r].m(e.parentNode,e))}for(M(),r=o.length;r<l.length;r+=1)a(r);L()}},i(t){if(!s){for(let n=0;n<o.length;n+=1)C(l[n]);s=!0}},o(t){l=l.filter(Boolean);for(let n=0;n<l.length;n+=1)D(l[n]);s=!1},d(t){t&&m(e),J(l,t)}}}function re(i){let e,s="No public playlists found.";return{c(){e=x("div"),e.textContent=s,this.h()},l(o){e=k(o,"DIV",{class:!0,"data-svelte-h":!0}),O(e)!=="svelte-5iw036"&&(e.textContent=s),this.h()},h(){y(e,"class","text-zinc-500")},m(o,l){$(o,e,l)},p:I,i:I,o:I,d(o){o&&m(e)}}}function ae(i){let e,s;return{c(){e=x("div"),s=H(i[2]),this.h()},l(o){e=k(o,"DIV",{class:!0});var l=E(e);s=z(l,i[2]),l.forEach(m),this.h()},h(){y(e,"class","text-red-500")},m(o,l){$(o,e,l),v(e,s)},p(o,l){l&4&&G(s,o[2])},i:I,o:I,d(o){o&&m(e)}}}function ie(i){let e,s="Loading music...";return{c(){e=x("div"),e.textContent=s,this.h()},l(o){e=k(o,"DIV",{class:!0,"data-svelte-h":!0}),O(e)!=="svelte-1yugvm"&&(e.textContent=s),this.h()},h(){y(e,"class","text-zinc-500")},m(o,l){$(o,e,l)},p:I,i:I,o:I,d(o){o&&m(e)}}}function B(i){let e,s,o,l;return s=new oe({props:{id:i[7].id,title:i[7].title,description:i[7].description||i[7].platform,image:i[7].cover_image||"https://images.unsplash.com/photo-1614680376593-902f74cf0d41?w=800&auto=format&fit=crop&q=60"}}),{c(){e=x("div"),le(s.$$.fragment),o=j(),this.h()},l(a){e=k(a,"DIV",{class:!0});var t=E(e);te(s.$$.fragment,t),o=P(t),t.forEach(m),this.h()},h(){y(e,"class","snap-start shrink-0 w-48")},m(a,t){$(a,e,t),ee(s,e,null),v(e,o),l=!0},p(a,t){const n={};t&1&&(n.id=a[7].id),t&1&&(n.title=a[7].title),t&1&&(n.description=a[7].description||a[7].platform),t&1&&(n.image=a[7].cover_image||"https://images.unsplash.com/photo-1614680376593-902f74cf0d41?w=800&auto=format&fit=crop&q=60"),s.$set(n)},i(a){l||(C(s.$$.fragment,a),l=!0)},o(a){D(s.$$.fragment,a),l=!1},d(a){a&&m(e),Z(s)}}}function F(i){let e,s,o,l=i[3]+"",a,t,n,r,g,d,w,u,_,b=S(i[4].slice(0,6)),h=[];for(let c=0;c<b.length;c+=1)h[c]=B(A(i,b,c));const K=c=>D(h[c],1,1,()=>{h[c]=null});return{c(){e=x("section"),s=x("div"),o=x("h2"),a=H(l),t=j(),n=x("a"),r=H("See more"),d=j(),w=x("div");for(let c=0;c<h.length;c+=1)h[c].c();u=j(),this.h()},l(c){e=k(c,"SECTION",{});var p=E(e);s=k(p,"DIV",{class:!0});var f=E(s);o=k(f,"H2",{class:!0});var V=E(o);a=z(V,l),V.forEach(m),t=P(f),n=k(f,"A",{href:!0,class:!0});var N=E(n);r=z(N,"See more"),N.forEach(m),f.forEach(m),d=P(p),w=k(p,"DIV",{class:!0});var R=E(w);for(let q=0;q<h.length;q+=1)h[q].l(R);R.forEach(m),u=P(p),p.forEach(m),this.h()},h(){y(o,"class","text-2xl font-bold text-white tracking-tight"),y(n,"href",g="/category/"+encodeURIComponent(i[3])),y(n,"class","text-sm font-medium text-apple-blue hover:text-blue-400 transition-colors"),y(s,"class","flex items-center justify-between mb-4"),y(w,"class","flex overflow-x-auto snap-x snap-mandatory gap-6 pb-4 -mx-8 px-8 scrollbar-hide")},m(c,p){$(c,e,p),v(e,s),v(s,o),v(o,a),v(s,t),v(s,n),v(n,r),v(e,d),v(e,w);for(let f=0;f<h.length;f+=1)h[f]&&h[f].m(w,null);v(e,u),_=!0},p(c,p){if((!_||p&1)&&l!==(l=c[3]+"")&&G(a,l),(!_||p&1&&g!==(g="/category/"+encodeURIComponent(c[3])))&&y(n,"href",g),p&1){b=S(c[4].slice(0,6));let f;for(f=0;f<b.length;f+=1){const V=A(c,b,f);h[f]?(h[f].p(V,p),C(h[f],1)):(h[f]=B(V),h[f].c(),C(h[f],1),h[f].m(w,null))}for(M(),f=b.length;f<h.length;f+=1)K(f);L()}},i(c){if(!_){for(let p=0;p<b.length;p+=1)C(h[p]);_=!0}},o(c){h=h.filter(Boolean);for(let p=0;p<h.length;p+=1)D(h[p]);_=!1},d(c){c&&m(e),J(h,c)}}}function ce(i){let e,s,o='<h1 class="text-3xl font-bold text-white tracking-tight mb-2">Discover</h1> <p class="text-zinc-400">Explore public playlists from the community.</p>',l,a,t,n,r;const g=[ie,ae,re,ne],d=[];function w(u,_){return _&1&&(a=null),u[1]?0:u[2]?1:(a==null&&(a=Object.keys(u[0]).length===0),a?2:3)}return t=w(i,-1),n=d[t]=g[t](i),{c(){e=x("div"),s=x("header"),s.innerHTML=o,l=j(),n.c(),this.h()},l(u){e=k(u,"DIV",{class:!0});var _=E(e);s=k(_,"HEADER",{"data-svelte-h":!0}),O(s)!=="svelte-cyni1w"&&(s.innerHTML=o),l=P(_),n.l(_),_.forEach(m),this.h()},h(){y(e,"class","space-y-12")},m(u,_){$(u,e,_),v(e,s),v(e,l),d[t].m(e,null),r=!0},p(u,[_]){let b=t;t=w(u,_),t===b?d[t].p(u,_):(M(),D(d[b],1,1,()=>{d[b]=null}),L(),n=d[t],n?n.p(u,_):(n=d[t]=g[t](u),n.c()),C(n,1),n.m(e,null))},i(u){r||(C(n),r=!0)},o(u){D(n),r=!1},d(u){u&&m(e),d[t].d()}}}function fe(i,e,s){let o={},l=!0,a=null;return W(async()=>{try{const n=(await se.getPublicPlaylists()).playlists||[];s(0,o=n.reduce((r,g)=>{const d=g.category||"Uncategorized";return r[d]||(r[d]=[]),r[d].push(g),r},{}))}catch(t){console.error("Failed to load public playlists",t),s(2,a="Failed to load playlists. Please try again.")}finally{s(1,l=!1)}}),[o,l,a]}class me extends X{constructor(e){super(),Y(this,e,fe,ce,Q,{})}}export{me as component};
