import{s as ie,z as ne,A as fe,B as Te,C as ze,D as Me,E as je,n as K,d as u,a as Q,F as te,i as M,b as c,l as p,c as y,e as N,f as L,g as j,h as w,t as A,j as H,k as me,r as de,m as X,v as Ae,o as He,p as pe,u as se,q as ye}from"../chunks/DF-Dz73P.js";import{S as ae,i as ce,d as U,t as T,a as S,m as W,b as R,e as J,g as Z,c as ee}from"../chunks/BdLCvuL5.js";import{I as Fe,g as Be,a as Ye,e as oe}from"../chunks/BeuEQZSN.js";import{a as re,b as he}from"../chunks/DOzjk_c7.js";import{g as Ge}from"../chunks/BNgdRHux.js";import{M as qe}from"../chunks/mF8Y1LZz.js";import{C as Oe,P as Le,a as Ue}from"../chunks/ju0NKtQh.js";import{G as We,L as Re}from"../chunks/DIVqPN1U.js";function Je(s){let e;const r=s[2].default,t=Te(r,s,s[3],null);return{c(){t&&t.c()},l(l){t&&t.l(l)},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&8)&&ze(t,r,l,l[3],e?je(r,l[3],o,null):Me(l[3]),null)},i(l){e||(S(t,l),e=!0)},o(l){T(t,l),e=!1},d(l){t&&t.d(l)}}}function Ke(s){let e,r;const t=[{name:"loader-2"},s[1],{iconNode:s[0]}];let l={$$slots:{default:[Je]},$$scope:{ctx:s}};for(let o=0;o<t.length;o+=1)l=ne(l,t[o]);return e=new Fe({props:l}),{c(){J(e.$$.fragment)},l(o){R(e.$$.fragment,o)},m(o,n){W(e,o,n),r=!0},p(o,[n]){const a=n&3?Be(t,[t[0],n&2&&Ye(o[1]),n&1&&{iconNode:o[0]}]):{};n&8&&(a.$$scope={dirty:n,ctx:o}),e.$set(a)},i(o){r||(S(e.$$.fragment,o),r=!0)},o(o){T(e.$$.fragment,o),r=!1},d(o){U(e,o)}}}function Qe(s,e,r){let{$$slots:t={},$$scope:l}=e;const o=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56"}]];return s.$$set=n=>{r(1,e=ne(ne({},e),fe(n))),"$$scope"in n&&r(3,l=n.$$scope)},e=fe(e),[o,e,t,l]}class _e extends ae{constructor(e){super(),ce(this,e,Qe,Ke,ie,{})}}function Xe(s){let e;const r=s[2].default,t=Te(r,s,s[3],null);return{c(){t&&t.c()},l(l){t&&t.l(l)},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&8)&&ze(t,r,l,l[3],e?je(r,l[3],o,null):Me(l[3]),null)},i(l){e||(S(t,l),e=!0)},o(l){T(t,l),e=!1},d(l){t&&t.d(l)}}}function Ze(s){let e,r;const t=[{name:"youtube"},s[1],{iconNode:s[0]}];let l={$$slots:{default:[Xe]},$$scope:{ctx:s}};for(let o=0;o<t.length;o+=1)l=ne(l,t[o]);return e=new Fe({props:l}),{c(){J(e.$$.fragment)},l(o){R(e.$$.fragment,o)},m(o,n){W(e,o,n),r=!0},p(o,[n]){const a=n&3?Be(t,[t[0],n&2&&Ye(o[1]),n&1&&{iconNode:o[0]}]):{};n&8&&(a.$$scope={dirty:n,ctx:o}),e.$set(a)},i(o){r||(S(e.$$.fragment,o),r=!0)},o(o){T(e.$$.fragment,o),r=!1},d(o){U(e,o)}}}function et(s,e,r){let{$$slots:t={},$$scope:l}=e;const o=[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17"}],["path",{d:"m10 15 5-3-5-3z"}]];return s.$$set=n=>{r(1,e=ne(ne({},e),fe(n))),"$$scope"in n&&r(3,l=n.$$scope)},e=fe(e),[o,e,t,l]}class tt extends ae{constructor(e){super(),ce(this,e,et,Ze,ie,{})}}const lt=!1,qt=Object.freeze(Object.defineProperty({__proto__:null,ssr:lt},Symbol.toStringTag,{value:"Module"}));function rt(s){let e,r,t;return{c(){e=A("Connect to "),r=A(s[0]),t=A(` to start syncing your playlists and sharing\r
                music.`)},l(l){e=L(l,"Connect to "),r=L(l,s[0]),t=L(l,` to start syncing your playlists and sharing\r
                music.`)},m(l,o){M(l,e,o),M(l,r,o),M(l,t,o)},p(l,o){o&1&&Q(r,l[0])},d(l){l&&(u(e),u(r),u(t))}}}function nt(s){let e,r,t;return{c(){e=A("You are connected to "),r=A(s[0]),t=A(`. Your playlists will be synced\r
                automatically.`)},l(l){e=L(l,"You are connected to "),r=L(l,s[0]),t=L(l,`. Your playlists will be synced\r
                automatically.`)},m(l,o){M(l,e,o),M(l,r,o),M(l,t,o)},p(l,o){o&1&&Q(r,l[0])},d(l){l&&(u(e),u(r),u(t))}}}function st(s){let e,r,t,l,o;return{c(){e=w("button"),r=A("Connect "),t=A(s[0]),this.h()},l(n){e=y(n,"BUTTON",{class:!0,style:!0});var a=N(e);r=L(a,"Connect "),t=L(a,s[0]),a.forEach(u),this.h()},h(){p(e,"class","px-6 py-2 rounded-full font-medium text-sm transition-all duration-200 hover:scale-105 w-full"),te(e,"background-color",s[2]),te(e,"color","white")},m(n,a){M(n,e,a),c(e,r),c(e,t),l||(o=de(e,"click",s[3]),l=!0)},p(n,a){a&1&&Q(t,n[0]),a&4&&te(e,"background-color",n[2])},d(n){n&&u(e),l=!1,o()}}}function ot(s){let e,r,t,l;return{c(){e=w("div"),r=w("span"),t=w("span"),l=A(`\r
                    Connected`),this.h()},l(o){e=y(o,"DIV",{class:!0,style:!0});var n=N(e);r=y(n,"SPAN",{class:!0});var a=N(r);t=y(a,"SPAN",{class:!0,style:!0}),N(t).forEach(u),l=L(a,`\r
                    Connected`),a.forEach(u),n.forEach(u),this.h()},h(){p(t,"class","w-2 h-2 rounded-full"),te(t,"background-color",s[2]),p(r,"class","flex items-center gap-2"),p(e,"class","px-4 py-2 rounded-full font-medium text-sm inline-flex"),te(e,"background-color",s[2]+"20"),te(e,"color",s[2])},m(o,n){M(o,e,n),c(e,r),c(r,t),c(r,l)},p(o,n){n&4&&te(t,"background-color",o[2]),n&4&&te(e,"background-color",o[2]+"20"),n&4&&te(e,"color",o[2])},d(o){o&&u(e)}}}function it(s){let e,r,t,l,o,n,a,i;function g(f,_){return f[1]?nt:rt}let P=g(s),E=P(s);function k(f,_){return f[1]?ot:st}let C=k(s),I=C(s);return{c(){e=w("div"),r=w("div"),t=w("h3"),l=A(s[0]),o=H(),n=w("p"),E.c(),a=H(),i=w("div"),I.c(),this.h()},l(f){e=y(f,"DIV",{class:!0,style:!0});var _=N(e);r=y(_,"DIV",{});var x=N(r);t=y(x,"H3",{class:!0});var d=N(t);l=L(d,s[0]),d.forEach(u),o=j(x),n=y(x,"P",{class:!0});var b=N(n);E.l(b),b.forEach(u),x.forEach(u),a=j(_),i=y(_,"DIV",{});var m=N(i);I.l(m),m.forEach(u),_.forEach(u),this.h()},h(){p(t,"class","text-xl font-bold capitalize mb-2"),p(n,"class","text-sm text-white/60 mb-6"),p(e,"class","glass rounded-2xl p-6 hover:bg-white/10 transition-all duration-300 flex flex-col justify-between h-full svelte-13ayq62"),te(e,"border-left","4px solid "+s[2])},m(f,_){M(f,e,_),c(e,r),c(r,t),c(t,l),c(r,o),c(r,n),E.m(n,null),c(e,a),c(e,i),I.m(i,null)},p(f,[_]){_&1&&Q(l,f[0]),P===(P=g(f))&&E?E.p(f,_):(E.d(1),E=P(f),E&&(E.c(),E.m(n,null))),C===(C=k(f))&&I?I.p(f,_):(I.d(1),I=C(f),I&&(I.c(),I.m(i,null))),_&4&&te(e,"border-left","4px solid "+f[2])},i:K,o:K,d(f){f&&u(e),E.d(),I.d()}}}function at(s,e,r){let t;me(s,he,i=>r(4,t=i));let{platform:l="spotify"}=e,{connected:o=!1}=e,{color:n="#1DB954"}=e;async function a(){try{const i=await re.get(`/api/link/${l}`,t.token);window.location.href=i.url}catch(i){console.error(`Failed to connect ${l}:`,i),alert(`Failed to connect ${l}: `+i.message)}}return s.$$set=i=>{"platform"in i&&r(0,l=i.platform),"connected"in i&&r(1,o=i.connected),"color"in i&&r(2,n=i.color)},[l,o,n,a]}class we extends ae{constructor(e){super(),ce(this,e,at,it,ie,{platform:0,connected:1,color:2})}}function Ce(s,e,r){const t=s.slice();return t[12]=e[r],t}function Ee(s,e,r){const t=s.slice();return t[12]=e[r],t}function ct(s){let e,r,t=oe(s[0]),l=[];for(let n=0;n<t.length;n+=1)l[n]=Ie(Ee(s,t,n));const o=n=>T(l[n],1,1,()=>{l[n]=null});return{c(){e=w("div");for(let n=0;n<l.length;n+=1)l[n].c();this.h()},l(n){e=y(n,"DIV",{class:!0});var a=N(e);for(let i=0;i<l.length;i+=1)l[i].l(a);a.forEach(u),this.h()},h(){p(e,"class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4")},m(n,a){M(n,e,a);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null);r=!0},p(n,a){if(a&49){t=oe(n[0]);let i;for(i=0;i<t.length;i+=1){const g=Ee(n,t,i);l[i]?(l[i].p(g,a),S(l[i],1)):(l[i]=Ie(g),l[i].c(),S(l[i],1),l[i].m(e,null))}for(Z(),i=t.length;i<l.length;i+=1)o(i);ee()}},i(n){if(!r){for(let a=0;a<t.length;a+=1)S(l[a]);r=!0}},o(n){l=l.filter(Boolean);for(let a=0;a<l.length;a+=1)T(l[a]);r=!1},d(n){n&&u(e),pe(l,n)}}}function ut(s){let e,r="No Spotify playlists found or not connected.";return{c(){e=w("div"),e.textContent=r,this.h()},l(t){e=y(t,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-16625l0"&&(e.textContent=r),this.h()},h(){p(e,"class","p-8 text-center border border-white/10 rounded-xl bg-white/5 text-white/50")},m(t,l){M(t,e,l)},p:K,i:K,o:K,d(t){t&&u(e)}}}function ft(s){let e,r,t;return r=new _e({props:{class:"animate-spin text-white/50"}}),{c(){e=w("div"),J(r.$$.fragment),this.h()},l(l){e=y(l,"DIV",{class:!0});var o=N(e);R(r.$$.fragment,o),o.forEach(u),this.h()},h(){p(e,"class","flex justify-center p-8")},m(l,o){M(l,e,o),W(r,e,null),t=!0},p:K,i(l){t||(S(r.$$.fragment,l),t=!0)},o(l){T(r.$$.fragment,l),t=!1},d(l){l&&u(e),U(r)}}}function dt(s){let e,r;return e=new Le({props:{size:20}}),{c(){J(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,l){W(e,t,l),r=!0},i(t){r||(S(e.$$.fragment,t),r=!0)},o(t){T(e.$$.fragment,t),r=!1},d(t){U(e,t)}}}function _t(s){let e,r;return e=new Oe({props:{size:20,class:"text-green-400"}}),{c(){J(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,l){W(e,t,l),r=!0},i(t){r||(S(e.$$.fragment,t),r=!0)},o(t){T(e.$$.fragment,t),r=!1},d(t){U(e,t)}}}function mt(s){let e,r;return e=new _e({props:{size:20,class:"animate-spin"}}),{c(){J(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,l){W(e,t,l),r=!0},i(t){r||(S(e.$$.fragment,t),r=!0)},o(t){T(e.$$.fragment,t),r=!1},d(t){U(e,t)}}}function Ie(s){let e,r,t,l,o,n,a,i=s[12].title+"",g,P,E,k=s[12].track_count+"",C,I,f,_,x,d,b,m,v,h,D;const O=[mt,_t,dt],F=[];function z($,V){return $[4][$[12].source_id]?0:$[12].imported?1:2}x=z(s),d=F[x]=O[x](s);function le(){return s[6](s[12])}return{c(){e=w("div"),r=w("img"),o=H(),n=w("div"),a=w("h4"),g=A(i),P=H(),E=w("p"),C=A(k),I=A(" tracks"),f=H(),_=w("button"),d.c(),m=H(),this.h()},l($){e=y($,"DIV",{class:!0});var V=N(e);r=y(V,"IMG",{src:!0,alt:!0,class:!0}),o=j(V),n=y(V,"DIV",{class:!0});var Y=N(n);a=y(Y,"H4",{class:!0});var q=N(a);g=L(q,i),q.forEach(u),P=j(Y),E=y(Y,"P",{class:!0});var B=N(E);C=L(B,k),I=L(B," tracks"),B.forEach(u),Y.forEach(u),f=j(V),_=y(V,"BUTTON",{class:!0});var G=N(_);d.l(G),G.forEach(u),m=j(V),V.forEach(u),this.h()},h(){se(r.src,t=s[12].cover_image||"/placeholder.png")||p(r,"src",t),p(r,"alt",l=s[12].title),p(r,"class","w-16 h-16 rounded-lg object-cover bg-white/10"),p(a,"class","font-bold truncate"),p(E,"class","text-sm text-white/50 truncate"),p(n,"class","flex-1 min-w-0"),p(_,"class","p-2 rounded-full bg-white/10 hover:bg-white/20 transition-colors disabled:opacity-50"),_.disabled=b=s[4][s[12].source_id]||s[12].imported,p(e,"class","glass p-4 rounded-xl flex items-center gap-4 group svelte-13ayq62")},m($,V){M($,e,V),c(e,r),c(e,o),c(e,n),c(n,a),c(a,g),c(n,P),c(n,E),c(E,C),c(E,I),c(e,f),c(e,_),F[x].m(_,null),c(e,m),v=!0,h||(D=de(_,"click",le),h=!0)},p($,V){s=$,(!v||V&1&&!se(r.src,t=s[12].cover_image||"/placeholder.png"))&&p(r,"src",t),(!v||V&1&&l!==(l=s[12].title))&&p(r,"alt",l),(!v||V&1)&&i!==(i=s[12].title+"")&&Q(g,i),(!v||V&1)&&k!==(k=s[12].track_count+"")&&Q(C,k);let Y=x;x=z(s),x!==Y&&(Z(),T(F[Y],1,1,()=>{F[Y]=null}),ee(),d=F[x],d||(d=F[x]=O[x](s),d.c()),S(d,1),d.m(_,null)),(!v||V&17&&b!==(b=s[4][s[12].source_id]||s[12].imported))&&(_.disabled=b)},i($){v||(S(d),v=!0)},o($){T(d),v=!1},d($){$&&u(e),F[x].d(),h=!1,D()}}}function pt(s){let e,r,t=oe(s[1]),l=[];for(let n=0;n<t.length;n+=1)l[n]=Pe(Ce(s,t,n));const o=n=>T(l[n],1,1,()=>{l[n]=null});return{c(){e=w("div");for(let n=0;n<l.length;n+=1)l[n].c();this.h()},l(n){e=y(n,"DIV",{class:!0});var a=N(e);for(let i=0;i<l.length;i+=1)l[i].l(a);a.forEach(u),this.h()},h(){p(e,"class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4")},m(n,a){M(n,e,a);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null);r=!0},p(n,a){if(a&50){t=oe(n[1]);let i;for(i=0;i<t.length;i+=1){const g=Ce(n,t,i);l[i]?(l[i].p(g,a),S(l[i],1)):(l[i]=Pe(g),l[i].c(),S(l[i],1),l[i].m(e,null))}for(Z(),i=t.length;i<l.length;i+=1)o(i);ee()}},i(n){if(!r){for(let a=0;a<t.length;a+=1)S(l[a]);r=!0}},o(n){l=l.filter(Boolean);for(let a=0;a<l.length;a+=1)T(l[a]);r=!1},d(n){n&&u(e),pe(l,n)}}}function ht(s){let e,r="No YouTube playlists found or not connected.";return{c(){e=w("div"),e.textContent=r,this.h()},l(t){e=y(t,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-t2g9br"&&(e.textContent=r),this.h()},h(){p(e,"class","p-8 text-center border border-white/10 rounded-xl bg-white/5 text-white/50")},m(t,l){M(t,e,l)},p:K,i:K,o:K,d(t){t&&u(e)}}}function gt(s){let e,r,t;return r=new _e({props:{class:"animate-spin text-white/50"}}),{c(){e=w("div"),J(r.$$.fragment),this.h()},l(l){e=y(l,"DIV",{class:!0});var o=N(e);R(r.$$.fragment,o),o.forEach(u),this.h()},h(){p(e,"class","flex justify-center p-8")},m(l,o){M(l,e,o),W(r,e,null),t=!0},p:K,i(l){t||(S(r.$$.fragment,l),t=!0)},o(l){T(r.$$.fragment,l),t=!1},d(l){l&&u(e),U(r)}}}function bt(s){let e,r;return e=new Le({props:{size:20}}),{c(){J(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,l){W(e,t,l),r=!0},i(t){r||(S(e.$$.fragment,t),r=!0)},o(t){T(e.$$.fragment,t),r=!1},d(t){U(e,t)}}}function vt(s){let e,r;return e=new Oe({props:{size:20,class:"text-green-400"}}),{c(){J(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,l){W(e,t,l),r=!0},i(t){r||(S(e.$$.fragment,t),r=!0)},o(t){T(e.$$.fragment,t),r=!1},d(t){U(e,t)}}}function $t(s){let e,r;return e=new _e({props:{size:20,class:"animate-spin"}}),{c(){J(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,l){W(e,t,l),r=!0},i(t){r||(S(e.$$.fragment,t),r=!0)},o(t){T(e.$$.fragment,t),r=!1},d(t){U(e,t)}}}function Pe(s){let e,r,t,l,o,n,a,i=s[12].title+"",g,P,E,k=s[12].track_count+"",C,I,f,_,x,d,b,m,v,h,D;const O=[$t,vt,bt],F=[];function z($,V){return $[4][$[12].source_id]?0:$[12].imported?1:2}x=z(s),d=F[x]=O[x](s);function le(){return s[7](s[12])}return{c(){e=w("div"),r=w("img"),o=H(),n=w("div"),a=w("h4"),g=A(i),P=H(),E=w("p"),C=A(k),I=A(" tracks"),f=H(),_=w("button"),d.c(),m=H(),this.h()},l($){e=y($,"DIV",{class:!0});var V=N(e);r=y(V,"IMG",{src:!0,alt:!0,class:!0}),o=j(V),n=y(V,"DIV",{class:!0});var Y=N(n);a=y(Y,"H4",{class:!0});var q=N(a);g=L(q,i),q.forEach(u),P=j(Y),E=y(Y,"P",{class:!0});var B=N(E);C=L(B,k),I=L(B," tracks"),B.forEach(u),Y.forEach(u),f=j(V),_=y(V,"BUTTON",{class:!0});var G=N(_);d.l(G),G.forEach(u),m=j(V),V.forEach(u),this.h()},h(){se(r.src,t=s[12].cover_image||"/placeholder.png")||p(r,"src",t),p(r,"alt",l=s[12].title),p(r,"class","w-16 h-16 rounded-lg object-cover bg-white/10"),p(a,"class","font-bold truncate"),p(E,"class","text-sm text-white/50 truncate"),p(n,"class","flex-1 min-w-0"),p(_,"class","p-2 rounded-full bg-white/10 hover:bg-white/20 transition-colors disabled:opacity-50"),_.disabled=b=s[4][s[12].source_id]||s[12].imported,p(e,"class","glass p-4 rounded-xl flex items-center gap-4 group svelte-13ayq62")},m($,V){M($,e,V),c(e,r),c(e,o),c(e,n),c(n,a),c(a,g),c(n,P),c(n,E),c(E,C),c(E,I),c(e,f),c(e,_),F[x].m(_,null),c(e,m),v=!0,h||(D=de(_,"click",le),h=!0)},p($,V){s=$,(!v||V&2&&!se(r.src,t=s[12].cover_image||"/placeholder.png"))&&p(r,"src",t),(!v||V&2&&l!==(l=s[12].title))&&p(r,"alt",l),(!v||V&2)&&i!==(i=s[12].title+"")&&Q(g,i),(!v||V&2)&&k!==(k=s[12].track_count+"")&&Q(C,k);let Y=x;x=z(s),x!==Y&&(Z(),T(F[Y],1,1,()=>{F[Y]=null}),ee(),d=F[x],d||(d=F[x]=O[x](s),d.c()),S(d,1),d.m(_,null)),(!v||V&18&&b!==(b=s[4][s[12].source_id]||s[12].imported))&&(_.disabled=b)},i($){v||(S(d),v=!0)},o($){T(d),v=!1},d($){$&&u(e),F[x].d(),h=!1,D()}}}function kt(s){let e,r,t,l,o,n,a="Spotify Playlists",i,g,P,E,k,C,I,f,_,x="YouTube Playlists",d,b,m,v;l=new qe({props:{class:"text-green-500"}});const h=[ft,ut,ct],D=[];function O($,V){return $[2]?0:$[0].length===0?1:2}g=O(s),P=D[g]=h[g](s),I=new tt({props:{class:"text-red-500"}});const F=[gt,ht,pt],z=[];function le($,V){return $[3]?0:$[1].length===0?1:2}return b=le(s),m=z[b]=F[b](s),{c(){e=w("div"),r=w("div"),t=w("div"),J(l.$$.fragment),o=H(),n=w("h3"),n.textContent=a,i=H(),P.c(),E=H(),k=w("div"),C=w("div"),J(I.$$.fragment),f=H(),_=w("h3"),_.textContent=x,d=H(),m.c(),this.h()},l($){e=y($,"DIV",{class:!0});var V=N(e);r=y(V,"DIV",{});var Y=N(r);t=y(Y,"DIV",{class:!0});var q=N(t);R(l.$$.fragment,q),o=j(q),n=y(q,"H3",{class:!0,"data-svelte-h":!0}),X(n)!=="svelte-4scmdb"&&(n.textContent=a),q.forEach(u),i=j(Y),P.l(Y),Y.forEach(u),E=j(V),k=y(V,"DIV",{});var B=N(k);C=y(B,"DIV",{class:!0});var G=N(C);R(I.$$.fragment,G),f=j(G),_=y(G,"H3",{class:!0,"data-svelte-h":!0}),X(_)!=="svelte-wk9aki"&&(_.textContent=x),G.forEach(u),d=j(B),m.l(B),B.forEach(u),V.forEach(u),this.h()},h(){p(n,"class","text-xl font-bold"),p(t,"class","flex items-center gap-2 mb-4"),p(_,"class","text-xl font-bold"),p(C,"class","flex items-center gap-2 mb-4"),p(e,"class","space-y-8")},m($,V){M($,e,V),c(e,r),c(r,t),W(l,t,null),c(t,o),c(t,n),c(r,i),D[g].m(r,null),c(e,E),c(e,k),c(k,C),W(I,C,null),c(C,f),c(C,_),c(k,d),z[b].m(k,null),v=!0},p($,[V]){let Y=g;g=O($),g===Y?D[g].p($,V):(Z(),T(D[Y],1,1,()=>{D[Y]=null}),ee(),P=D[g],P?P.p($,V):(P=D[g]=h[g]($),P.c()),S(P,1),P.m(r,null));let q=b;b=le($),b===q?z[b].p($,V):(Z(),T(z[q],1,1,()=>{z[q]=null}),ee(),m=z[b],m?m.p($,V):(m=z[b]=F[b]($),m.c()),S(m,1),m.m(k,null))},i($){v||(S(l.$$.fragment,$),S(P),S(I.$$.fragment,$),S(m),v=!0)},o($){T(l.$$.fragment,$),T(P),T(I.$$.fragment,$),T(m),v=!1},d($){$&&u(e),U(l),D[g].d(),U(I),z[b].d()}}}function yt(s,e,r){let t;me(s,he,f=>r(8,t=f));const l=Ae();let o=[],n=[],a=!1,i=!1,g={};async function P(){r(2,a=!0);try{const f=await re.get("/api/spotify/playlists",t.token);r(0,o=f.playlists||[])}catch(f){console.error("Failed to fetch Spotify playlists",f)}finally{r(2,a=!1)}}async function E(){r(3,i=!0);try{const f=await re.get("/api/youtube/playlists/fresh",t.token);r(1,n=f.playlists||[])}catch(f){console.error("Failed to fetch YouTube playlists",f)}finally{r(3,i=!1)}}async function k(f){r(4,g[f.source_id]=!0,g);try{await re.post("/api/playlists/import",{platform:f.platform,source_id:f.source_id,is_public:!1},t.token),l("import"),f.imported=!0}catch(_){console.error("Failed to import playlist",_),alert("Failed to import playlist: "+_.message)}finally{r(4,g[f.source_id]=!1,g)}}return He(()=>{P(),E()}),[o,n,a,i,g,k,f=>k(f),f=>k(f)]}class wt extends ae{constructor(e){super(),ce(this,e,yt,kt,ie,{})}}function De(s,e,r){const t=s.slice();return t[16]=e[r],t}function Ct(s){let e,r,t="Platform Connections",l,o,n,a,i,g,P,E,k,C="My Saved Playlists",I,f,_,x;n=new we({props:{platform:"spotify",connected:s[0].spotify_connected,color:"#1DB954",onConnectionSuccess:s[11]}}),i=new we({props:{platform:"youtube",connected:s[0].youtube_connected,color:"#FF0000",onConnectionSuccess:s[12]}});let d=(s[0].spotify_connected||s[0].youtube_connected)&&Ve(s);const b=[Dt,Pt,It],m=[];function v(h,D){return h[3]?0:h[1].length===0?1:2}return f=v(s),_=m[f]=b[f](s),{c(){e=w("section"),r=w("h2"),r.textContent=t,l=H(),o=w("div"),J(n.$$.fragment),a=H(),J(i.$$.fragment),g=H(),d&&d.c(),P=H(),E=w("section"),k=w("h2"),k.textContent=C,I=H(),_.c(),this.h()},l(h){e=y(h,"SECTION",{class:!0});var D=N(e);r=y(D,"H2",{class:!0,"data-svelte-h":!0}),X(r)!=="svelte-c84xe6"&&(r.textContent=t),l=j(D),o=y(D,"DIV",{class:!0});var O=N(o);R(n.$$.fragment,O),a=j(O),R(i.$$.fragment,O),O.forEach(u),D.forEach(u),g=j(h),d&&d.l(h),P=j(h),E=y(h,"SECTION",{});var F=N(E);k=y(F,"H2",{class:!0,"data-svelte-h":!0}),X(k)!=="svelte-166hata"&&(k.textContent=C),I=j(F),_.l(F),F.forEach(u),this.h()},h(){p(r,"class","text-2xl font-bold mb-6"),p(o,"class","grid grid-cols-1 md:grid-cols-2 gap-6"),p(e,"class","mb-12"),p(k,"class","text-2xl font-bold mb-6")},m(h,D){M(h,e,D),c(e,r),c(e,l),c(e,o),W(n,o,null),c(o,a),W(i,o,null),M(h,g,D),d&&d.m(h,D),M(h,P,D),M(h,E,D),c(E,k),c(E,I),m[f].m(E,null),x=!0},p(h,D){const O={};D&1&&(O.connected=h[0].spotify_connected),n.$set(O);const F={};D&1&&(F.connected=h[0].youtube_connected),i.$set(F),h[0].spotify_connected||h[0].youtube_connected?d?(d.p(h,D),D&1&&S(d,1)):(d=Ve(h),d.c(),S(d,1),d.m(P.parentNode,P)):d&&(Z(),T(d,1,1,()=>{d=null}),ee());let z=f;f=v(h),f===z?m[f].p(h,D):(Z(),T(m[z],1,1,()=>{m[z]=null}),ee(),_=m[f],_?_.p(h,D):(_=m[f]=b[f](h),_.c()),S(_,1),_.m(E,null))},i(h){x||(S(n.$$.fragment,h),S(i.$$.fragment,h),S(d),S(_),x=!0)},o(h){T(n.$$.fragment,h),T(i.$$.fragment,h),T(d),T(_),x=!1},d(h){h&&(u(e),u(g),u(P),u(E)),U(n),U(i),d&&d.d(h),m[f].d()}}}function Et(s){let e,r='<div class="w-12 h-12 border-4 border-white/20 border-t-apple-blue rounded-full animate-spin"></div>';return{c(){e=w("div"),e.innerHTML=r,this.h()},l(t){e=y(t,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-2ex8r3"&&(e.innerHTML=r),this.h()},h(){p(e,"class","flex items-center justify-center py-20")},m(t,l){M(t,e,l)},p:K,i:K,o:K,d(t){t&&u(e)}}}function Ve(s){let e,r,t='<div><h2 class="text-2xl font-bold">Import Playlists</h2> <p class="text-sm text-white/60 mt-1">Import playlists from your connected platforms</p></div>',l,o,n;return o=new wt({}),o.$on("import",s[6]),{c(){e=w("section"),r=w("div"),r.innerHTML=t,l=H(),J(o.$$.fragment),this.h()},l(a){e=y(a,"SECTION",{class:!0});var i=N(e);r=y(i,"DIV",{class:!0,"data-svelte-h":!0}),X(r)!=="svelte-5960s2"&&(r.innerHTML=t),l=j(i),R(o.$$.fragment,i),i.forEach(u),this.h()},h(){p(r,"class","flex items-center justify-between mb-6"),p(e,"class","mb-12")},m(a,i){M(a,e,i),c(e,r),c(e,l),W(o,e,null),n=!0},p:K,i(a){n||(S(o.$$.fragment,a),n=!0)},o(a){T(o.$$.fragment,a),n=!1},d(a){a&&u(e),U(o)}}}function It(s){let e,r,t=oe(s[1]),l=[];for(let n=0;n<t.length;n+=1)l[n]=xe(De(s,t,n));const o=n=>T(l[n],1,1,()=>{l[n]=null});return{c(){e=w("div");for(let n=0;n<l.length;n+=1)l[n].c();this.h()},l(n){e=y(n,"DIV",{class:!0});var a=N(e);for(let i=0;i<l.length;i+=1)l[i].l(a);a.forEach(u),this.h()},h(){p(e,"class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6")},m(n,a){M(n,e,a);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null);r=!0},p(n,a){if(a&514){t=oe(n[1]);let i;for(i=0;i<t.length;i+=1){const g=De(n,t,i);l[i]?(l[i].p(g,a),S(l[i],1)):(l[i]=xe(g),l[i].c(),S(l[i],1),l[i].m(e,null))}for(Z(),i=t.length;i<l.length;i+=1)o(i);ee()}},i(n){if(!r){for(let a=0;a<t.length;a+=1)S(l[a]);r=!0}},o(n){l=l.filter(Boolean);for(let a=0;a<l.length;a+=1)T(l[a]);r=!1},d(n){n&&u(e),pe(l,n)}}}function Pt(s){let e,r,t,l,o="No Saved Playlists Yet",n,a,i="Import your first playlist to get started!",g,P,E="Browse Public Playlists",k;return r=new qe({props:{class:"mx-auto mb-4 opacity-30",size:48}}),{c(){e=w("div"),J(r.$$.fragment),t=H(),l=w("h3"),l.textContent=o,n=H(),a=w("p"),a.textContent=i,g=H(),P=w("a"),P.textContent=E,this.h()},l(C){e=y(C,"DIV",{class:!0});var I=N(e);R(r.$$.fragment,I),t=j(I),l=y(I,"H3",{class:!0,"data-svelte-h":!0}),X(l)!=="svelte-byz6fz"&&(l.textContent=o),n=j(I),a=y(I,"P",{class:!0,"data-svelte-h":!0}),X(a)!=="svelte-dteha"&&(a.textContent=i),g=j(I),P=y(I,"A",{href:!0,class:!0,"data-svelte-h":!0}),X(P)!=="svelte-127t00s"&&(P.textContent=E),I.forEach(u),this.h()},h(){p(l,"class","text-xl font-bold mb-2"),p(a,"class","text-white/60 mb-6"),p(P,"href","/public"),p(P,"class","inline-block px-6 py-3 bg-apple-blue rounded-full font-bold hover:bg-blue-600 transition-colors"),p(e,"class","glass rounded-3xl p-12 text-center svelte-10x5qx1")},m(C,I){M(C,e,I),W(r,e,null),c(e,t),c(e,l),c(e,n),c(e,a),c(e,g),c(e,P),k=!0},p:K,i(C){k||(S(r.$$.fragment,C),k=!0)},o(C){T(r.$$.fragment,C),k=!1},d(C){C&&u(e),U(r)}}}function Dt(s){let e,r;return{c(){e=w("div"),r=A(s[3]),this.h()},l(t){e=y(t,"DIV",{class:!0});var l=N(e);r=L(l,s[3]),l.forEach(u),this.h()},h(){p(e,"class","glass rounded-2xl p-8 text-center text-red-400 svelte-10x5qx1")},m(t,l){M(t,e,l),c(e,r)},p(t,l){l&8&&Q(r,t[3])},i:K,o:K,d(t){t&&u(e)}}}function Se(s){let e,r;return{c(){e=w("img"),this.h()},l(t){e=y(t,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){se(e.src,r=s[16].cover_image)||p(e,"src",r),p(e,"alt",""),p(e,"class","w-12 h-12 rounded-lg object-cover")},m(t,l){M(t,e,l)},p(t,l){l&2&&!se(e.src,r=t[16].cover_image)&&p(e,"src",r)},d(t){t&&u(e)}}}function Vt(s){let e,r,t;return e=new Re({props:{size:14}}),{c(){J(e.$$.fragment),r=A(`\r
                    Private`)},l(l){R(e.$$.fragment,l),r=L(l,`\r
                    Private`)},m(l,o){W(e,l,o),M(l,r,o),t=!0},i(l){t||(S(e.$$.fragment,l),t=!0)},o(l){T(e.$$.fragment,l),t=!1},d(l){l&&u(r),U(e,l)}}}function St(s){let e,r,t;return e=new We({props:{size:14}}),{c(){J(e.$$.fragment),r=A(`\r
                    Public`)},l(l){R(e.$$.fragment,l),r=L(l,`\r
                    Public`)},m(l,o){W(e,l,o),M(l,r,o),t=!0},i(l){t||(S(e.$$.fragment,l),t=!0)},o(l){T(e.$$.fragment,l),t=!1},d(l){l&&u(r),U(e,l)}}}function xe(s){let e,r,t,l,o=s[16].title+"",n,a,i,g=s[16].platform+"",P,E,k,C,I=(s[16].description||"No description")+"",f,_,x,d,b,m,v,h,D,O,F,z=s[16].cover_image&&Se(s);const le=[St,Vt],$=[];function V(q,B){return q[16].is_public?0:1}b=V(s),m=$[b]=le[b](s);function Y(){return s[13](s[16])}return{c(){e=w("div"),r=w("div"),t=w("div"),l=w("h3"),n=A(o),a=H(),i=w("p"),P=A(g),E=H(),z&&z.c(),k=H(),C=w("p"),f=A(I),_=H(),x=w("div"),d=w("button"),m.c(),h=H(),this.h()},l(q){e=y(q,"DIV",{class:!0});var B=N(e);r=y(B,"DIV",{class:!0});var G=N(r);t=y(G,"DIV",{class:!0});var ue=N(t);l=y(ue,"H3",{class:!0});var ge=N(l);n=L(ge,o),ge.forEach(u),a=j(ue),i=y(ue,"P",{class:!0});var be=N(i);P=L(be,g),be.forEach(u),ue.forEach(u),E=j(G),z&&z.l(G),G.forEach(u),k=j(B),C=y(B,"P",{class:!0});var ve=N(C);f=L(ve,I),ve.forEach(u),_=j(B),x=y(B,"DIV",{class:!0});var $e=N(x);d=y($e,"BUTTON",{class:!0});var ke=N(d);m.l(ke),ke.forEach(u),$e.forEach(u),h=j(B),B.forEach(u),this.h()},h(){p(l,"class","font-bold text-lg mb-1"),p(i,"class","text-sm text-white/50 capitalize"),p(t,"class","flex-1"),p(r,"class","flex items-start justify-between mb-4"),p(C,"class","text-sm text-white/60 mb-4 line-clamp-2 svelte-10x5qx1"),p(d,"class",v="flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium transition-colors "+(s[16].is_public?"bg-green-500/20 text-green-400 hover:bg-green-500/30":"bg-white/5 text-white/60 hover:bg-white/10")),p(x,"class","flex items-center justify-between"),p(e,"class","glass rounded-2xl p-6 hover:bg-white/10 transition-colors svelte-10x5qx1")},m(q,B){M(q,e,B),c(e,r),c(r,t),c(t,l),c(l,n),c(t,a),c(t,i),c(i,P),c(r,E),z&&z.m(r,null),c(e,k),c(e,C),c(C,f),c(e,_),c(e,x),c(x,d),$[b].m(d,null),c(e,h),D=!0,O||(F=de(d,"click",Y),O=!0)},p(q,B){s=q,(!D||B&2)&&o!==(o=s[16].title+"")&&Q(n,o),(!D||B&2)&&g!==(g=s[16].platform+"")&&Q(P,g),s[16].cover_image?z?z.p(s,B):(z=Se(s),z.c(),z.m(r,null)):z&&(z.d(1),z=null),(!D||B&2)&&I!==(I=(s[16].description||"No description")+"")&&Q(f,I);let G=b;b=V(s),b!==G&&(Z(),T($[G],1,1,()=>{$[G]=null}),ee(),m=$[b],m||(m=$[b]=le[b](s),m.c()),S(m,1),m.m(d,null)),(!D||B&2&&v!==(v="flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium transition-colors "+(s[16].is_public?"bg-green-500/20 text-green-400 hover:bg-green-500/30":"bg-white/5 text-white/60 hover:bg-white/10")))&&p(d,"class",v)},i(q){D||(S(m),D=!0)},o(q){T(m),D=!1},d(q){q&&u(e),z&&z.d(),$[b].d(),O=!1,F()}}}function Ne(s){let e,r;return e=new Ue({props:{platform:s[5],onClose:s[14],onImportComplete:s[8]}}),{c(){J(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,l){W(e,t,l),r=!0},p(t,l){const o={};l&32&&(o.platform=t[5]),l&16&&(o.onClose=t[14]),e.$set(o)},i(t){r||(S(e.$$.fragment,t),r=!0)},o(t){T(e.$$.fragment,t),r=!1},d(t){U(e,t)}}}function xt(s){let e,r,t,l="Dashboard",o,n,a,i=s[0].username?`, ${s[0].username}`:"",g,P,E,k,C,I,f,_;const x=[Et,Ct],d=[];function b(v,h){return v[2]?0:1}k=b(s),C=d[k]=x[k](s);let m=s[4]&&Ne(s);return{c(){e=w("div"),r=w("div"),t=w("h1"),t.textContent=l,o=H(),n=w("p"),a=A("Welcome back"),g=A(i),P=A("!"),E=H(),C.c(),I=H(),m&&m.c(),f=ye(),this.h()},l(v){e=y(v,"DIV",{class:!0});var h=N(e);r=y(h,"DIV",{class:!0});var D=N(r);t=y(D,"H1",{class:!0,"data-svelte-h":!0}),X(t)!=="svelte-rubnoj"&&(t.textContent=l),o=j(D),n=y(D,"P",{class:!0});var O=N(n);a=L(O,"Welcome back"),g=L(O,i),P=L(O,"!"),O.forEach(u),D.forEach(u),E=j(h),C.l(h),h.forEach(u),I=j(v),m&&m.l(v),f=ye(),this.h()},h(){p(t,"class","text-5xl font-bold mb-2"),p(n,"class","text-xl text-white/60"),p(r,"class","mb-12"),p(e,"class","p-8 pt-24 max-w-7xl mx-auto")},m(v,h){M(v,e,h),c(e,r),c(r,t),c(r,o),c(r,n),c(n,a),c(n,g),c(n,P),c(e,E),d[k].m(e,null),M(v,I,h),m&&m.m(v,h),M(v,f,h),_=!0},p(v,[h]){(!_||h&1)&&i!==(i=v[0].username?`, ${v[0].username}`:"")&&Q(g,i);let D=k;k=b(v),k===D?d[k].p(v,h):(Z(),T(d[D],1,1,()=>{d[D]=null}),ee(),C=d[k],C?C.p(v,h):(C=d[k]=x[k](v),C.c()),S(C,1),C.m(e,null)),v[4]?m?(m.p(v,h),h&16&&S(m,1)):(m=Ne(v),m.c(),S(m,1),m.m(f.parentNode,f)):m&&(Z(),T(m,1,1,()=>{m=null}),ee())},i(v){_||(S(C),S(m),_=!0)},o(v){T(C),T(m),_=!1},d(v){v&&(u(e),u(I),u(f)),d[k].d(),m&&m.d(v)}}}function Nt(s,e,r){let t;me(s,he,b=>r(10,t=b));let l={spotify_connected:!1,youtube_connected:!1,username:""},o=[],n=!0,a="",i=!1,g=null;He(async()=>{if(!t.token)return;const m=new URLSearchParams(window.location.search).get("connected");m&&(r(5,g=m),r(4,i=!0),window.history.replaceState({},"","/dashboard")),await Promise.all([P(),E()]),r(2,n=!1)});async function P(){try{const b=await re.get("/api/connection/status",t.token);r(0,l=b)}catch(b){console.error("Failed to load connection status:",b),r(3,a="Connection status error: "+b.message)}}async function E(){try{const b=await re.get("/api/my/playlists",t.token);r(1,o=b.playlists||[])}catch(b){console.error("Failed to load saved playlists:",b),r(3,a="Saved playlists error: "+b.message)}}function k(b){r(5,g=b),r(4,i=!0),P()}function C(){E()}async function I(b,m){try{await re.patch(`/api/playlists/${b}/public`,{is_public:!m},t.token),r(1,o=o.map(v=>v.id===b?{...v,is_public:!m}:v))}catch(v){alert("Failed to update playlist: "+v.message)}}const f=()=>k("spotify"),_=()=>k("youtube"),x=b=>I(b.id,b.is_public),d=()=>r(4,i=!1);return s.$$.update=()=>{s.$$.dirty&1024&&(t.token||typeof window<"u"&&Ge("/login"))},[l,o,n,a,i,g,E,k,C,I,t,f,_,x,d]}class Ot extends ae{constructor(e){super(),ce(this,e,Nt,xt,ie,{})}}export{Ot as component,qt as universal};
