import{s as X,d,i as I,b as D,r as Z,l as P,c as y,e as L,m as M,g as x,f as Q,q as O,h as v,j as z,t as W,k as tt,o as et,n as g,a as lt,p as it}from"../chunks/DF-Dz73P.js";import{S as st,i as ot,d as S,t as b,a as _,c as H,m as Y,b as j,e as A,g as F}from"../chunks/BdLCvuL5.js";import{e as R}from"../chunks/BeuEQZSN.js";import{P as rt}from"../chunks/B5nKSrpE.js";import{P as at,a as nt}from"../chunks/ju0NKtQh.js";import{a as U,b as ct}from"../chunks/DOzjk_c7.js";function G(r,t,i){const e=r.slice();return e[10]=t[i],e}function ft(r){let t,i,e=R(r[0]),l=[];for(let s=0;s<e.length;s+=1)l[s]=J(G(r,e,s));const f=s=>b(l[s],1,1,()=>{l[s]=null});return{c(){t=v("div");for(let s=0;s<l.length;s+=1)l[s].c();this.h()},l(s){t=y(s,"DIV",{class:!0});var n=L(t);for(let o=0;o<l.length;o+=1)l[o].l(n);n.forEach(d),this.h()},h(){P(t,"class","grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6")},m(s,n){I(s,t,n);for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(t,null);i=!0},p(s,n){if(n&33){e=R(s[0]);let o;for(o=0;o<e.length;o+=1){const k=G(s,e,o);l[o]?(l[o].p(k,n),_(l[o],1)):(l[o]=J(k),l[o].c(),_(l[o],1),l[o].m(t,null))}for(F(),o=e.length;o<l.length;o+=1)f(o);H()}},i(s){if(!i){for(let n=0;n<e.length;n+=1)_(l[n]);i=!0}},o(s){l=l.filter(Boolean);for(let n=0;n<l.length;n+=1)b(l[n]);i=!1},d(s){s&&d(t),it(l,s)}}}function ut(r){let t,i=`You haven&#39;t imported any playlists yet.
            <a href="/settings" class="text-white hover:underline">Connect your accounts</a> to get started.`;return{c(){t=v("div"),t.innerHTML=i,this.h()},l(e){t=y(e,"DIV",{class:!0,"data-svelte-h":!0}),M(t)!=="svelte-18umzea"&&(t.innerHTML=i),this.h()},h(){P(t,"class","text-zinc-500")},m(e,l){I(e,t,l)},p:g,i:g,o:g,d(e){e&&d(t)}}}function pt(r){let t,i;return{c(){t=v("div"),i=W(r[2]),this.h()},l(e){t=y(e,"DIV",{class:!0});var l=L(t);i=Q(l,r[2]),l.forEach(d),this.h()},h(){P(t,"class","text-red-500")},m(e,l){I(e,t,l),D(t,i)},p(e,l){l&4&&lt(i,e[2])},i:g,o:g,d(e){e&&d(t)}}}function mt(r){let t,i="Please log in to view your library.";return{c(){t=v("div"),t.textContent=i,this.h()},l(e){t=y(e,"DIV",{class:!0,"data-svelte-h":!0}),M(t)!=="svelte-1v96q7a"&&(t.textContent=i),this.h()},h(){P(t,"class","text-zinc-500")},m(e,l){I(e,t,l)},p:g,i:g,o:g,d(e){e&&d(t)}}}function ht(r){let t,i="Loading library...";return{c(){t=v("div"),t.textContent=i,this.h()},l(e){t=y(e,"DIV",{class:!0,"data-svelte-h":!0}),M(t)!=="svelte-1mte21q"&&(t.textContent=i),this.h()},h(){P(t,"class","text-zinc-500")},m(e,l){I(e,t,l)},p:g,i:g,o:g,d(e){e&&d(t)}}}function J(r){let t,i;return t=new rt({props:{id:r[10].id,title:r[10].title,description:r[10].description||r[10].platform,image:r[10].cover_image||"https://images.unsplash.com/photo-1614680376593-902f74cf0d41?w=800&auto=format&fit=crop&q=60",isPublic:r[10].is_public,showToggle:!0}}),t.$on("toggle",r[5]),{c(){A(t.$$.fragment)},l(e){j(t.$$.fragment,e)},m(e,l){Y(t,e,l),i=!0},p(e,l){const f={};l&1&&(f.id=e[10].id),l&1&&(f.title=e[10].title),l&1&&(f.description=e[10].description||e[10].platform),l&1&&(f.image=e[10].cover_image||"https://images.unsplash.com/photo-1614680376593-902f74cf0d41?w=800&auto=format&fit=crop&q=60"),l&1&&(f.isPublic=e[10].is_public),t.$set(f)},i(e){i||(_(t.$$.fragment,e),i=!0)},o(e){b(t.$$.fragment,e),i=!1},d(e){S(t,e)}}}function K(r){let t,i;return t=new nt({props:{platform:"spotify",onClose:r[8],onImportComplete:r[6]}}),{c(){A(t.$$.fragment)},l(e){j(t.$$.fragment,e)},m(e,l){Y(t,e,l),i=!0},p(e,l){const f={};l&8&&(f.onClose=e[8]),t.$set(f)},i(e){i||(_(t.$$.fragment,e),i=!0)},o(e){b(t.$$.fragment,e),i=!1},d(e){S(t,e)}}}function dt(r){let t,i,e,l='<h1 class="text-3xl font-bold text-white tracking-tight mb-2">Your Library</h1> <p class="text-zinc-400">All your imported playlists from Spotify and YouTube.</p>',f,s,n,o,k,p,h,E,m,T,q,$;n=new at({props:{size:20}});const B=[ht,mt,pt,ut,ft],w=[];function N(a,u){return a[1]?0:a[4].token?a[2]?2:a[0].length===0?3:4:1}p=N(r),h=w[p]=B[p](r);let c=r[3]&&K(r);return{c(){t=v("div"),i=v("header"),e=v("div"),e.innerHTML=l,f=z(),s=v("button"),A(n.$$.fragment),o=W(`\r
            Import Playlist`),k=z(),h.c(),E=z(),c&&c.c(),m=O(),this.h()},l(a){t=y(a,"DIV",{class:!0});var u=L(t);i=y(u,"HEADER",{class:!0});var C=L(i);e=y(C,"DIV",{"data-svelte-h":!0}),M(e)!=="svelte-1qi5p6h"&&(e.innerHTML=l),f=x(C),s=y(C,"BUTTON",{class:!0});var V=L(s);j(n.$$.fragment,V),o=Q(V,`\r
            Import Playlist`),V.forEach(d),C.forEach(d),k=x(u),h.l(u),u.forEach(d),E=x(a),c&&c.l(a),m=O(),this.h()},h(){P(s,"class","flex items-center gap-2 px-4 py-2 bg-white text-black rounded-full font-bold hover:scale-105 transition-transform"),P(i,"class","flex items-center justify-between"),P(t,"class","space-y-8")},m(a,u){I(a,t,u),D(t,i),D(i,e),D(i,f),D(i,s),Y(n,s,null),D(s,o),D(t,k),w[p].m(t,null),I(a,E,u),c&&c.m(a,u),I(a,m,u),T=!0,q||($=Z(s,"click",r[7]),q=!0)},p(a,[u]){let C=p;p=N(a),p===C?w[p].p(a,u):(F(),b(w[C],1,1,()=>{w[C]=null}),H(),h=w[p],h?h.p(a,u):(h=w[p]=B[p](a),h.c()),_(h,1),h.m(t,null)),a[3]?c?(c.p(a,u),u&8&&_(c,1)):(c=K(a),c.c(),_(c,1),c.m(m.parentNode,m)):c&&(F(),b(c,1,1,()=>{c=null}),H())},i(a){T||(_(n.$$.fragment,a),_(h),_(c),T=!0)},o(a){b(n.$$.fragment,a),b(h),b(c),T=!1},d(a){a&&(d(t),d(E),d(m)),S(n),w[p].d(),c&&c.d(a),q=!1,$()}}}function _t(r,t,i){let e;tt(r,ct,m=>i(4,e=m));let l=[],f=!0,s=null,n=!1;et(async()=>{await o()});async function o(){if(!e.token){i(1,f=!1);return}try{const m=await U.getPlaylists();i(0,l=m.playlists||[])}catch(m){console.error("Failed to load library",m),i(2,s="Failed to load your library.")}finally{i(1,f=!1)}}async function k(m){const{id:T,isPublic:q}=m.detail;try{await U.patch(`/api/playlists/${T}/public`,{is_public:!q},e.token),i(0,l=l.map($=>$.id===T?{...$,is_public:!q}:$))}catch($){console.error("Failed to toggle playlist visibility",$),alert("Failed to update playlist visibility")}}function p(){o()}return[l,f,s,n,e,k,p,()=>i(3,n=!0),()=>i(3,n=!1)]}class wt extends st{constructor(t){super(),ot(this,t,_t,dt,X,{})}}export{wt as component};
